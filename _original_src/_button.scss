/************************************************************
BUTTON

************************************************************/

/************************************************************
Including size eXtra-Small .btn-xs and btn-group-xs as in Bootstrap 5
************************************************************/
.btn-xs {
    @include button-size(
        $padding-y    : $btn-padding-y-xs,
        $padding-x    : $btn-padding-x-xs,
        $font-size    : $font-size-xs,
        $border-radius: $btn-border-radius-xs
    );
}
.btn-group-xs > .btn { @extend .btn-xs; }

/************************************************************
To be able to control font-family etc. 'buttons'
can be created as <div>
cursor-style added to prevent text-cursor on buttons
Also overwrite default bootstrap behaviour
************************************************************/




//HER=> .btn-outline-NIELS {
//HER=>     @include button-variant(
//HER=>         $background       : $btn-standard-background,
//HER=>         $hover-background : $btn-standard-hover-background,
//HER=>         $active-background: $btn-standard-active-background,
//HER=>         $border           : $btn-standard-border-color
//HER=>     )
//HER=> }

/*
@mixin button-variant(
  $background,
  $border,
  $color: color-contrast($background),
  $hover-background: if($color == $color-contrast-light, shade-color($background, $btn-hover-bg-shade-amount), tint-color($background, $btn-hover-bg-tint-amount)),
  $hover-border: if($color == $color-contrast-light, shade-color($border, $btn-hover-border-shade-amount), tint-color($border, $btn-hover-border-tint-amount)),
  $hover-color: color-contrast($hover-background),
  $active-background: if($color == $color-contrast-light, shade-color($background, $btn-active-bg-shade-amount), tint-color($background, $btn-active-bg-tint-amount)),
  $active-border: if($color == $color-contrast-light, shade-color($border, $btn-active-border-shade-amount), tint-color($border, $btn-active-border-tint-amount)),
  $active-color: color-contrast($active-background),
  $disabled-background: $background,
  $disabled-border: $border,
  $disabled-color: color-contrast($disabled-background)
) {

*/


/*
Chrome/Google:
border-color: --google-grey-300-rgb: 218, 220, 224;

hover-bg
    --hover-bg-color: rgba(var(--google-blue-500-rgb), .04);
    --google-blue-500-rgb: 66, 133, 244;

*/

//HER=> a.btn, a.list-group-item,
//HER=> div.btn, div.list-group-item {
//HER=>     cursor: default;
//HER=> }
//HER=>
//HER=> .btn:not(:disabled):not(.disabled) {
//HER=>     cursor: default !important;
//HER=> }


.btn-#{$btn-style-name}{

    //Set default border-colors for buttons
    --#{$prefix}btn-border-color        : #{$jb-element-border-color};
    --#{$prefix}btn-hover-border-color  : #{$jb-element-hover-border-color};
    --#{$prefix}btn-active-border-color : #{$jb-element-active-border-color};

    //Force all buttons to have same light blue box-shadow when in focus
    --#{$prefix}btn-focus-shadow-rgb: #{to-rgb($component-active-bg)};

    //*********************************************************
    //Standard color = light white
    &.standard {
        @include button-variant(
            $background         : $btn-standard-background,
            $hover-background   : $btn-standard-hover-background,
            $active-background  : $btn-standard-active-background,

            $border             : $jb-element-border-color,
            $hover-border       : $jb-element-hover-border-color,
            $active-border      : $jb-element-active-border-color,

            //$disabled-border: $border,
        );

        //Overwrite focus shadow again
        --#{$prefix}btn-focus-shadow-rgb: #{to-rgb($component-active-bg)};
    }

    //*********************************************************
    //primary = border and text in primary color
    &.primary {
        //Text-color = primary, Border-color = primary
        @include button-text-color-variant( $primary );
        @include button-border-color-variant( $primary );
    }

    //*********************************************************
    //selected = background in selected-blue color
    &.selected {
        @include button-background-color-variant( $form-check-input-checked-bg-color );
        @include button-text-color-variant( $form-check-input-checked-color );
    }


    //*********************************************************
    //Special version to have transparent button
    //transparent = normal/dark color on light background
    //transparent-on-dark = Light color on dark background
    //semi-transparent
    &.transparent, &.transparent-on-dark {
        --#{$prefix}btn-bg       : none;    //$btn-standard-background
        --#{$prefix}btn-hover-bg : rgba( #{to-rgb($btn-standard-hover-background)} , .10 );
        --#{$prefix}btn-active-bg: rgba( #{to-rgb($btn-standard-active-background)}, .15 );

        --#{$prefix}btn-border-color       : #{ color-opacity( $jb-element-border-color, .10 ) };
        --#{$prefix}btn-hover-border-color : #{ color-opacity( $jb-element-border-color, .15 ) };
        --#{$prefix}btn-active-border-color: #{ color-opacity( $jb-element-border-color, .20 ) };
    }

    &.transparent-on-dark {
        @include button-text-color-variant( $color-contrast-light );
    }

    &.semi-transparent {
        --#{$prefix}btn-bg       : rgba( #{to-rgb($btn-standard-background)}       , #{$btn-standard-semi-transparent-bg}        );
        --#{$prefix}btn-hover-bg : rgba( #{to-rgb($btn-standard-hover-background)} , #{$btn-standard-semi-transparent-hover-bg}  );
        --#{$prefix}btn-active-bg: rgba( #{to-rgb($btn-standard-active-background)}, #{$btn-standard-semi-transparent-active-bg} );






//HER=>         //background: none; // !important;
//HER=>         @include control-colors(
//HER=>             $incl-active    : true,
//HER=>             $incl-border    : false,
//HER=>             $no-gradians    : true,
//HER=>             $bg-color       : $button-bg-color-semi-transparent,
//HER=>             $bg-color-hover : $button-bg-color-semi-transparent-hover,
//HER=>             $bg-color-active: darken($button-bg-color-semi-transparent-hover, $darken-active-percent)
//HER=>         );
//HER=>
    }




    //*********************************************************
    //Overwrite Bootstrap default opacity for disabled buttons when class .show-as-normal is added
    &.show-as-normal {
        --#{$prefix}btn-disabled-opacity: 1;
    }

    &.no-border {
        border-color: transparent !important;
    }

    &.no-shadow {
        box-shadow: none !important;
    }

    //min-width used for buttons with short text ("Ok")
    &.min-width {
        min-width: 5em;
    }

    //*********************************************************
    //Icons in buttons get equal size to allow shift of icon
    & > i.fa {
        min-width : 1em;
        text-align: left;
        &:only-child {
            text-align: center;
        }
    }

    //Containers for stacked icons get same size as single icon
    & > span.fa-stack {
        width         : 1em;
        height        : 1em;
        line-height   : 1.5 * $font-size-sm;
        vertical-align: top;
    }


    //************************************************************
    //Special version to have square buttons (with only icon)
    &.square {
        //Horizontal and vertical center using flex-box
        display        : inline-flex;
        align-items    : center;
        justify-content: center;

        --#{$prefix}btn-padding-y: 0;
        --#{$prefix}btn-padding-x: 0;

        height: var(--#{$prefix}btn-square-dimention);
        width : var(--#{$prefix}btn-square-dimention);

        &:not(.big-square){
            --#{$prefix}btn-square-dimention: #{$button-square-dimension};
            &.btn-sm {
                --#{$prefix}btn-square-dimention: #{$button-square-dimension-sm};
            }
            &.btn-xs {
                --#{$prefix}btn-square-dimention: #{$button-square-dimension-xs};
            }
        }

        &.big-square {
            --#{$prefix}btn-square-dimention: #{$button-big-square-dimension};
            &.btn-sm {
                --#{$prefix}btn-square-dimention: #{$button-big-square-dimension-sm};
            }
            &.btn-xs {
                --#{$prefix}btn-square-dimention: #{$button-big-square-dimension-xs};
            }
        }

        //.big-icon = Extra big icons
        &.big-icon          {
            --#{$prefix}btn-font-size: roundRem($font-size-base * $button-big-scale);
        }
        &.btn-sm.big-icon   {
            --#{$prefix}btn-font-size: roundRem($font-size-sm   * $button-big-scale);
        }
        &.btn-xs.big-icon   {
            --#{$prefix}btn-font-size: roundRem($font-size-xs   * $button-big-scale);
        }

        //Center icon and make space for icons with width > height
        & > i.fa {
            width     : 1.25em; //Same as fa-fw
            height    : 1em;
            text-align: center;
        }
    }

    //Extra-extra large icon => The button gets bigger
    &.extra-large-icon {
        --#{$prefix}btn-line-height: 1;
        --#{$prefix}btn-padding-y  : 0.25rem;
        --#{$prefix}btn-padding-x  : 0.25rem;
        --#{$prefix}btn-font-size  : 2rem;

        flex-direction : row;
        align-items    : center;
        justify-content: center;
    }
}



.btn.btn-XXX-#{$btn-style-name}{

//HER=>     @include box-shadow($btn-box-shadow);

//HER=>     &:active {
//HER=>         @include box-shadow($btn-active-box-shadow);
//HER=>         z-index: 2;
//HER=>     }
//HER=>
//HER=>     @include control-colors($incl-error: true);
//HER=>
//HER=>     &.primary {
//HER=>         $primary-color: map-get($theme-colors, primary );
//HER=>         @include control-colors(
//HER=>                 $incl-active: false,
//HER=>                 $incl-bg    : false,
//HER=>
//HER=>                 $color: $primary-color,
//HER=>
//HER=>                 $border-color      : $primary-color,
//HER=>                 $border-color-hover: darken($primary-color, $darken-border-color-hover-percent)
//HER=>         );
//HER=>     }

    //Semi-selected - but not for standard radio/checkbox button
    &.semi-selected:not(.standard-checkbox) {
        @include control-colors(
            $incl-active: false,
            $incl-border: false,
            $color      : $control-active-color,
            $bg-color   : $form-check-input-indeterminate-bg-color
        )
    }


    //Standard checkbox-button
    &.standard-checkbox {
        .standard-checkbox-checked-color {
            color: $control-active-bg-color;
        }
    }

    &.standard-checkbox.semi-selected {
        .standard-checkbox-checked-color {
            color: $form-check-input-indeterminate-bg-color;
        }
    }


//HER=>     //Icons in buttons get equal size to allow shift of icon
//HER=>     & > i.fa {
//HER=>         min-width : 1em;
//HER=>         text-align: left;
//HER=>         &:only-child {
//HER=>             text-align: center;
//HER=>         }
//HER=>     }
//HER=>
//HER=>     //Containers for stacked icons get same size as single icon
//HER=>     & > span.fa-stack {
//HER=>         width         : 1em;
//HER=>         height        : 1em;
//HER=>         line-height   : 1.5 * $font-size-sm;
//HER=>         vertical-align: top;
//HER=>     }


    //Overwrite Bootstrap default opacity for disabled buttons when class .show-as-normal is added
//HER=>     &.disabled.show-as-normal, &.show-as-normal:disabled {
//HER=>         opacity: 1;
//HER=>     }

//HER=>     &.no-border {
//HER=>         border-color: transparent !important;
//HER=>     }
//HER=>
//HER=>     &.no-shadow {
//HER=>         box-shadow: none !important;
//HER=>     }
//HER=>
//HER=>
//HER=>     /************************************************************
//HER=>     Special version to have transparent button
//HER=>     transparent = normal/dark color og light background
//HER=>     transparent-on-dark = Light color on dark background
//HER=>     ************************************************************/
//HER=>     &.transparent {
//HER=>         background: none !important;;
//HER=>         @include control-colors(
//HER=>             $incl-active : true,
//HER=>             $bg-color    : rgba(0,0,0,0),
//HER=>
//HER=> //HER=>             $border-color      : rgba(0,0,0, .1),
//HER=> //HER=>             $border-color-hover: rgba(0,0,0,.15)
//HER=>         );
//HER=>     }
//HER=>
//HER=>     &.transparent-on-dark {
//HER=>         background: none !important;
//HER=>         $color-transparent: #D4D4D4;
//HER=>         @include control-colors(
//HER=>             $incl-active : true,
//HER=>
//HER=>             $color       : $color-transparent,
//HER=>             $color-hover : lighten($color-transparent, $darken-hover-percent),
//HER=>             $color-active: lighten($color-transparent, $darken-active-percent),
//HER=>             $color-focus : lighten($color-transparent, 40%),
//HER=>
//HER=>             $bg-color    : rgba(0,0,0,0),
//HER=>
//HER=> //HER=>             $border-color      : rgba(0,0,0, .1),
//HER=> //HER=>             $border-color-hover: rgba(0,0,0,.15)
//HER=>         );
//HER=>     }
//HER=>
//HER=>     &.semi-transparent {
//HER=>         //background: none; // !important;
//HER=>         @include control-colors(
//HER=>             $incl-active    : true,
//HER=>             $incl-border    : false,
//HER=>             $no-gradians    : true,
//HER=>             $bg-color       : $button-bg-color-semi-transparent,
//HER=>             $bg-color-hover : $button-bg-color-semi-transparent-hover,
//HER=>             $bg-color-active: darken($button-bg-color-semi-transparent-hover, $darken-active-percent)
//HER=>         );
//HER=>     }
//HER=>     /************************************************************
//HER=>     Special version to have square buttons (with only icon)
//HER=>     ************************************************************/
//HER=>     &.square {
//HER=>         //Horizontal and vertical center using flex-box
//HER=>         display        : inline-flex;
//HER=>         align-items    : center;
//HER=>         justify-content: center;
//HER=>
//HER=>         padding: 0 !important;
//HER=>
//HER=>
//HER=>         &:not(.big-square){
//HER=>             height: $button-square-dimension;
//HER=>             width : $button-square-dimension;
//HER=>
//HER=>             &.btn-sm {
//HER=>                 height: $button-square-dimension-sm;
//HER=>                 width : $button-square-dimension-sm;
//HER=>             }
//HER=>
//HER=>             &.btn-xs {
//HER=>                 height: $button-square-dimension-xs;
//HER=>                 width : $button-square-dimension-xs;
//HER=>             }
//HER=>         }
//HER=>
//HER=>         &.big-square {
//HER=>             height: $button-big-square-dimension;
//HER=>             width : $button-big-square-dimension;
//HER=>
//HER=>             &.btn-sm {
//HER=>                 height: $button-big-square-dimension-sm;
//HER=>                 width : $button-big-square-dimension-sm;
//HER=>             }
//HER=>
//HER=>             &.btn-xs {
//HER=>                 height: $button-big-square-dimension-xs;
//HER=>                 width : $button-big-square-dimension-xs;
//HER=>             }
//HER=>         }
//HER=>
//HER=>         //.big-icon = Extra big icons
//HER=>         &.big-icon          { font-size: roundRem($font-size-base * $font-size-scale); }
//HER=>         &.btn-sm.big-icon   { font-size: roundRem($font-size-sm   * $font-size-scale); }
//HER=>         &.btn-xs.big-icon   { font-size: roundRem($font-size-xs   * $font-size-scale); }
//HER=>
//HER=>         //Center icon and make space for icons with width > height
//HER=>         & > i.fa {
//HER=>             width     : 1.25em; //Same as fa-fw
//HER=>             height    : 1em;
//HER=>             text-align: center;
//HER=>         }
//HER=>     }
//HER=>
//HER=>     //Extra-extra large icon => The button gets bigger
//HER=>     &.extra-large-icon {
//HER=>         line-height    : 1;
//HER=>         padding        : 0.25rem !important;
//HER=>         flex-direction : row;
//HER=>         align-items    : center;
//HER=>         justify-content: center;
//HER=>         font-size      : 2rem;
//HER=>     }
}

/************************************************************
Modernizr-test for elements with class="active" when selected
************************************************************/
@include show-and-hide-for-modernizr-test(
	$modernizr-test     : 'active',
	$parent-element-type: '.btn',
    $incl-table-display : false
);



/************************************************************
BUTTON-GROUP
************************************************************/
//Buttons in vertical button-groups with left-aligned contents (default = center)
.btn-group-vertical.btn-group-left > .btn {
    @extend .text-left;
}

//Vertical button-group insides in popover and vertical button-group with full width: width = 100%
.popover-body .btn-group-vertical,
.btn-group-vertical.btn-group-full-width {
    @extend .w-100;
}

//Horizontal button-group inside input-group or with full width gets equal width
.input-group .btn-group,
.btn-group:not(.btn-group-vertical).btn-group-full-width {
    display: flex;
    width  : 100%;
    .btn {
        flex: 1 0 10px;
    }
}

//Horizontal button-group centered in it parent
.btn-group:not(.btn-group-vertical).btn-group-center-in-parent {
    width  : auto;
    margin : auto;
    display: block;
}

//With border
.btn-group, .btn-group-vertical {
    &.btn-group-border {
        border: 1px solid $jb-structure-border-color;
        border-radius: $btn-border-radius;
        &.btn-group-sm {
            border-radius: $btn-border-radius-sm;
        }
        &.btn-group-xs {
            border-radius: $btn-border-radius-xs;
        }
    }
}


//Add padding-top when inside a input-group with label
.has-fixed-label ~ .btn-group {
    padding-top: 3px;
}

//Header inside vertical button-group
.btn-group-vertical {
    .btn-group-header {
        @include title-variant();
        @include title-color();
        line-height: 1.3;
        width: 100%;

/* Removed to align all icons in groups (with and without header)
        //Adjust padding for buttons after a header
        & ~ .btn {
            padding-left: 2*$btn-padding-x;
        }
*/
    }

    //Align all icons in vertical button group to width = 1.25em
    .btn.container-icon-and-text {
        & > i, & > .container-stacked-icons {
            width     : 1.25em;
            text-align: center;
        }
    }


    //Small
    &.btn-group-sm .btn-group-header {
        @include title-variant-sm();
        line-height: 1.3;
/* Removed to align all icons in groups (with and without header)
        & ~ .btn {
            padding-left: 2*$btn-padding-x-sm;
        }
*/
    }

    //Extra small
    &.btn-group-xs .btn-group-header {
        @include header-variant-xs( $incl-border: false );
        line-height: 1.3;
/* Removed to align all icons in groups (with and without header)
        & ~ .btn {
            padding-left: 2*$btn-padding-x-xs;
        }
*/
    }

    //Margin between two .btn-group-vertical
    & + .btn-group-vertical {
        margin-top: $content-padding-y;
        &.btn-group-sm {
            margin-top: $content-padding-y-sm;
        }
        &.btn-group-xs {
            margin-top: $content-padding-y-sm;
        }
    }
}



/************************************************************
BLOCK BUTTONS (from Bootstrap)
Extend to also include margin-bottom
************************************************************/
/*MANGLER
.btn-block + .btn-block {
    margin-bottom: $btn-block-spacing-y;
}
*/

/************************************************************
MENU (BUTTON-GROUP)
************************************************************/
.bs-menu-container {
    hr {
        width: 100%;
        margin: $input-btn-padding-y 0;
        padding: 0;
    }
    hr.first.before, hr.last.after, hr + hr {
        display: none;
    }
}


/************************************************************
btn-shadow and btn-shadow-sm
classes to create "shadow-buttons" = invisible buttons for
correct spacing
************************************************************/
.btn-shadow, .btn-shadow-sm {
    display   : inline-block;
    margin    : 0;
    padding   : 0;
    border    : none;
    visibility: hidden;
}
.btn-shadow {
    width : $button-square-dimension;
    height: $button-square-dimension;
}

.btn-shadow-sm {
    width : $button-square-dimension-sm;
    height: $button-square-dimension-sm;
}
